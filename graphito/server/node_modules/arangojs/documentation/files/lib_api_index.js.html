<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib/api/index.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/action.html">action</a></li>
            
                <li><a href="../classes/admin.html">admin</a></li>
            
                <li><a href="../classes/aqlfunction.html">aqlfunction</a></li>
            
                <li><a href="../classes/arango.html">arango</a></li>
            
                <li><a href="../classes/batch.html">batch</a></li>
            
                <li><a href="../classes/collection.html">collection</a></li>
            
                <li><a href="../classes/cursor.html">cursor</a></li>
            
                <li><a href="../classes/database.html">database</a></li>
            
                <li><a href="../classes/document.html">document</a></li>
            
                <li><a href="../classes/edge.html">edge</a></li>
            
                <li><a href="../classes/endpoint.html">endpoint</a></li>
            
                <li><a href="../classes/graph.html">graph</a></li>
            
                <li><a href="../classes/import.html">import</a></li>
            
                <li><a href="../classes/index.html">index</a></li>
            
                <li><a href="../classes/jobs.html">jobs</a></li>
            
                <li><a href="../classes/query.html">query</a></li>
            
                <li><a href="../classes/simple.html">simple</a></li>
            
                <li><a href="../classes/transaction.html">transaction</a></li>
            
                <li><a href="../classes/traversal.html">traversal</a></li>
            
                <li><a href="../classes/users.html">users</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/action.html">action</a></li>
            
                <li><a href="../modules/admin.html">admin</a></li>
            
                <li><a href="../modules/aqlfunction.html">aqlfunction</a></li>
            
                <li><a href="../modules/arango.html">arango</a></li>
            
                <li><a href="../modules/batch.html">batch</a></li>
            
                <li><a href="../modules/collection.html">collection</a></li>
            
                <li><a href="../modules/cursor.html">cursor</a></li>
            
                <li><a href="../modules/database.html">database</a></li>
            
                <li><a href="../modules/document.html">document</a></li>
            
                <li><a href="../modules/edge.html">edge</a></li>
            
                <li><a href="../modules/endpoint.html">endpoint</a></li>
            
                <li><a href="../modules/graph.html">graph</a></li>
            
                <li><a href="../modules/import.html">import</a></li>
            
                <li><a href="../modules/index.html">index</a></li>
            
                <li><a href="../modules/jobs.html">jobs</a></li>
            
                <li><a href="../modules/query.html">query</a></li>
            
                <li><a href="../modules/simple.html">simple</a></li>
            
                <li><a href="../modules/transaction.html">transaction</a></li>
            
                <li><a href="../modules/traversal.html">traversal</a></li>
            
                <li><a href="../modules/users.html">users</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: lib/api/index.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var Arango = require(&#x27;../arango&#x27;);


/**
 * The api module to create indices for collections in ArangoDB.
 *
 * @class index
 * @module arango
 * @submodule index
 **/
function IndexAPI(db) {
    var path = &quot;/_api/index/&quot;,
        xpath = &quot;/_api/index?collection=&quot;;
        
    return {
        /**
         * Creates a Cap Index for the collection
         * @param {String} [collection] - The collection containing the documents.If not provided the collection defined
         * in the connection is used.
         * @param {Object} data       - a JSON Object containing at least one attributes:
         * @param {Number} [data.size] -  The maximal number of documents for the collection.
         * @param {Number} [data.byteSize] - The maximal size of the active document data in the collection.
         * @param {Function} callback   - The callback function.
         * @return{Promise}
         * @method createCapIndex
         */
        &quot;createCapIndex&quot;: function(collection, data, callback) {
            if (typeof data === &#x27;function&#x27;) {
                callback = data;
                if (typeof collection === &quot;string&quot;) {
                    throw &quot;size or byteSize must be set.&quot;;
                } else {
                    data = collection;
                    collection = db._collection;
                }
            }

            data.type = &quot;cap&quot;;
            return db.post(xpath + collection, data, callback);
        },
        /**
         * Creates a geo-spatial Index for the collection
         *
         * @param {String} [collection] - The collection containing the documents.If not provided the collection defined
         * in the connection is used.
         * @param {List} fields  - A list with one or two attribute paths. If it is a list with one attribute path
         * location, then a geo-spatial index on all documents is created using location as path to the coordinates.
         * The value of the attribute must be a list with at least two double values. The list must contain the latitude
         * (first value) and the longitude (second value). All documents, which do not have the attribute path or with
         * value that are not suitable, are ignored. If it is a list with two attribute paths latitude and longitude,
         * then a geo-spatial index on all documents is created using latitude and longitude as paths the latitude and
         * the longitude. The value of the attribute latitude and of the attribute longitude must a double. All
         * documents, which do not have the attribute paths or which values are not suitable, are ignored.
         *
         * @param {Object} [options]  - a JSONObject with optional parameters:
         * @param {Boolean} [options.geoJson]: If a geo-spatial index on a location is constructed and geoJson is true,
         * then the order within the list is longitude followed by latitude. This corresponds to the format described in
         * http://geojson.org/geojson-spec.html#positions
         * @param {Object} [options.constraint=false] - If constraint is true, then a geo-spatial constraint is created.
         * The constraint is a non-unique variant of the index. Note that it is also possible to set the unique
         * attribute instead of the constraint attribute.
         * @param {Object} [options.ignoreNull=false] - If a geo-spatial constraint is created and ignoreNull is true,
         * then documents with a null in location or at least one null in latitude or longitude are ignored.
         * @param {Function} callback   - The callback function.
         * @return{Promise}
         * @method createGeoSpatialIndex
         */
        &quot;createGeoSpatialIndex&quot;: function(collection, fields, options, callback) {
            if (typeof fields === &#x27;function&#x27;) {
                callback = fields;
                options = {};
                fields = collection;
                collection = db._collection;
            }
            if (typeof options === &#x27;function&#x27;) {
                callback = options;
                if (typeof collection !== &quot;string&quot;) {
                    options = fields;
                    fields = collection;
                    collection = db._collection;
                } else {
                    options = {};
                }
            }
            options.type = &quot;geo&quot;;
            options.fields = fields;
            return db.post(xpath + collection, options, callback);
        },
        /**
         * Creates a hash index for the collection collection-name, if it does not already exist.
         *
         * @param {String} [collection] - The collection containing the documents.If not provided the collection defined
         * in the connection is used.
         * @param {List} fields        - A list of attribute paths.
         * @param {Boolean} [unique=false]    -  If true, then create a unique index.
         * @param {Function} callback   - The callback function.
         * @return{Promise}
         * @method createHashIndex
         */
        &quot;createHashIndex&quot;: function(collection, fields, unique, callback) {
            if (typeof fields === &#x27;function&#x27;) {
                callback = fields;
                unique = false;
                fields = collection;
                collection = db._collection;
            }
            if (typeof unique === &#x27;function&#x27;) {
                callback = unique;
                if (typeof collection !== &quot;string&quot;) {
                    unique = fields;
                    fields = collection;
                    collection = db._collection;
                } else {
                    unique = false;
                }
            }
            var options = {};
            options.type = &quot;hash&quot;;
            options.fields = fields;
            options.unique = unique;
            return db.post(xpath + collection, options, callback);
        },
        /**
         * Creates a skip-List index for the collection collection-name, if it does not already exist.
         *
         * @param {String} [collection] - The collection containing the documents.If not provided the collection defined
         * in the connection is used.
         * @param {List} fields        - A list of attribute paths.
         * @param {Boolean} [unique=false]    -  If true, then create a unique index.
         * @param {Function} callback   - The callback function.
         * @return{Promise}
         * @method createSkipListIndex
         */
        &quot;createSkipListIndex&quot;: function(collection, fields, unique, callback) {
            if (typeof fields === &#x27;function&#x27;) {
                callback = fields;
                unique = false;
                fields = collection;
                collection = db._collection;
            }
            if (typeof unique === &#x27;function&#x27;) {
                callback = unique;
                if (typeof collection !== &quot;string&quot;) {
                    unique = fields;
                    fields = collection;
                    collection = db._collection;
                } else {
                    unique = false;
                }
            }
            var options = {};
            options.type = &quot;skiplist&quot;;
            options.fields = fields;
            options.unique = unique;
            return db.post(xpath + collection, options, callback);
        },
        /**
         * Creates a fulltext index for the collection collection-name, if it does not already exist.
         *
         * @param {String} [collection] - The collection containing the documents.If not provided the collection defined
         * in the connection is used.
         * @param {List} fields        - A list of attribute paths.
         * @param {Number} [minLength]  - Minimum character length of words to index. Will default to a server-defined
         * value if unspecified. It is thus recommended to set this value explicitly when creating the index.
         * @param {Function} callback   - The callback function.
         * @return{Promise}
         * @method createFulltextIndex
         */
        &quot;createFulltextIndex&quot;: function(collection, fields, minLength, callback) {
            if (typeof fields === &#x27;function&#x27;) {
                callback = fields;
                minLength = false;
                fields = collection;
                collection = db._collection;
            }
            if (typeof minLength === &#x27;function&#x27;) {
                callback = minLength;
                if (typeof collection !== &quot;string&quot;) {
                    minLength = fields;
                    fields = collection;
                    collection = db._collection;
                } else {
                    minLength = false;
                }
            }
            var options = {};
            options.type = &quot;fulltext&quot;;
            options.fields = fields;
            if (minLength !== false) {
                options.minLength = minLength;
            }
            return db.post(xpath + collection, options, callback);
        },
        /**
         * Creates a bitarray index for the collection collection-name, if it does not already exist.
         *
         * @param {String} [collection] - The collection containing the documents.If not provided the collection defined
         * in the connection is used.
         * @param {List} fields        - A list of attribute paths.
         * @param {Function} callback   - The callback function.
         * @return{Promise}
         * @method createBitarrayIndex
         */
        &quot;createBitarrayIndex&quot;: function(collection, fields, callback) {
            if (typeof fields === &quot;function&quot;) {
                callback = fields;
                fields = collection;
                collection = db._collection;
            }
            var options = {};
            options.type = &quot;bitarray&quot;;
            options.fields = fields;
            options.unique = false;
            return db.post(xpath + collection, options, callback);
        },
        /**
         * Retrieves an index
         * @param {String} id  -   the index id.
         * @param {Function} callback   - The callback function.
         * @return{Promise}
         * @method get
         */
        &quot;get&quot;: function(id, callback) {
            return db.get(path + id, callback);
        },
        /**
         * Deletes an index
         * @param {String} id  -   the index id.
         * @param {Function} callback   - The callback function.
         * @return{Promise}
         * @method delete
         */
        &quot;delete&quot;: function(id, callback) {
            return db.delete(path + id, callback);
        },
        /**
         * Retrieves all indices for a collection
         *
         * @param {String} [collection] - The collection containing the documents.If not provided the collection defined
         * in the connection is used.
         * @param {Function} callback   - The callback function.
         * @return{Promise}
         * @method list
         */
        &quot;list&quot;: function(collection, callback) {
            if (typeof collection === &quot;function&quot;) {
                callback = collection;
                collection = db._collection;
            }
            return db.get(xpath + collection, callback);
        }
    }
}


module.exports = Arango.api(&#x27;index&#x27;, IndexAPI);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
